<div ng-controller="planInputsCtrl" class="plan-inputs-container"><!-- 
        ==============
        start FTE step
        ==============
     --><div ng-if="step === 'FTE'"><!-- header name --><div class="plan-inputs-header">Plan Inputs - FTE</div><!-- inputs --><div class="plan-inputs"><div class="row workers-question">How many full-time equivalents (FTE) are available to work cases?</div><div class="row workers-container"><!--  --><div class="label">FTEs</div><div id="workers" class="workers" ng-class="{'overflowing': workersScroll_checkOverflow()}"><div ng-repeat="(key, worker) in inputData.fte" class="worker"><div class="title {{worker.title}}">{{worker.title}}</div><div class="input-container"><input class="input" type="number" ng-model="worker.fte" ng-change="updateWorkingPlanSave(inputData)"></div></div></div><div class="add"><button ng-click="addWorkerType()" class="wfo-button primary _icon"><i class="fa fa-plus"></i></button></div></div><div class="scroll-buttons" ng-if="workersScroll_checkOverflow()"><div class="buttons"><button ng-click="workersScroll_scroll('left')" ng-mousedown="workersScroll_scrollHold('left')" ng-mouseup="workersScroll_scrollHoldUp()" ng-mouseleave="workersScroll_scrollHoldUp()"><i class="fa fa-chevron-left"></i></button> <button ng-click="workersScroll_scroll('right')" ng-mousedown="workersScroll_scrollHold('right')" ng-mouseup="workersScroll_scrollHoldUp()" ng-mouseleave="workersScroll_scrollHoldUp()"><i class="fa fa-chevron-right"></i></button></div></div><!--  --><div class="row workers-question">How much does each worker type cost per hour?</div><div class="row workers-container last"><div class="label">Burn Rate (Cost)</div><div id="costs" class="workers"><div ng-repeat="(key, worker) in inputData.fte" class="worker"><div class="title {{worker.title}}">{{worker.title}}</div><div class="input-container"><input class="input" type="number" ng-model="worker.burnRate" ng-change="updateWorkingPlanSave(inputData)"></div></div></div><div class="add" style="opacity:0"><button class="wfo-button primary _icon"><i class="fa fa-plus"></i></button></div></div><!--  --><div id="conflictAlerts" class="conflict-alerts" ng-class="{'conflicts-exist': validateData(inputData)}"></div></div><!-- selections --><div class="plan-inputs-select-plan"><div class="text">load inputs from a previously saved plan</div><div class="button"><button class="wfo-button primary" ng-click="selectSavedPlan_open()">Select a Plan</button></div></div><!--
            modals
        --><!-- add workers --><div ng-if="addWorkerModalShown" class="modal modal-wrapper plan-inputs-modal create-worker" ng-click="addWorkerType_close()"><div class="modal-container" ng-click="$event.stopPropagation()"><div class="modal-title">Add a Worker Type</div><div class="input-row"><div class="label">Title</div><div class="input-container"><input type="text" class="input" ng-model="newWorker.title" placeholder="Enter worker name"></div></div><div class="input-row"><div class="label">FTEs</div><div class="input-container"><input type="number" class="input" ng-model="newWorker.fte"></div></div><div class="input-row"><div class="label">Burn Rate</div><div class="input-container"><input type="number" class="input" ng-model="newWorker.burnRate"></div></div><div class="submit"><button class="wfo-button _primary submit" ng-click="addWorkerType_submit(newWorker)">Submit</button></div><div class="close"><button class="wfo-button _icon close" ng-click="addWorkerType_close()"><i class="fa fa-times"></i></button></div></div></div></div><!-- 
        end FTE step
     --><!-- 
        ===============================
        start avialable inventoroy step
        ===============================
     --><div ng-if="step === 'AvailableInventory'"><div class="plan-inputs-header">Plan Inputs - Available Inventory</div><!-- inputs --><div class="plan-inputs"><div class="row workers-question">How many cases are available to be worked?</div><div class="row workers-container"><!--  --><div class="label">Cases</div><div id="workers" class="workers" ng-class="{'overflowing': workersScroll_checkOverflow()}"><div ng-repeat="(key, case) in inputData.ai" class="worker"><div class="title {{case.title}}">{{case.title}}</div><div class="input-container"><input class="input" type="number" ng-model="case.cases" ng-change="updateWorkingPlanSave(inputData)"></div></div></div><div class="add" style="opacity:0"><button class="wfo-button primary _icon"><i class="fa fa-plus"></i></button></div></div><div class="scroll-buttons" ng-if="workersScroll_checkOverflow()"><div class="buttons"><button ng-click="workersScroll_scroll('left')" ng-mousedown="workersScroll_scrollHold('left')" ng-mouseup="workersScroll_scrollHoldUp()" ng-mouseleave="workersScroll_scrollHoldUp()"><i class="fa fa-chevron-left"></i></button> <button ng-click="workersScroll_scroll('right')" ng-mousedown="workersScroll_scrollHold('right')" ng-mouseup="workersScroll_scrollHoldUp()" ng-mouseleave="workersScroll_scrollHoldUp()"><i class="fa fa-chevron-right"></i></button></div></div><!--  --><div class="row workers-question">How many hours does each case take to work?</div><div class="row workers-container last"><div class="label">Hours</div><div id="costs" class="workers"><div ng-repeat="(key, case) in inputData.ai" class="worker"><div class="title {{case.title}}">{{case.title}}</div><div class="input-container"><input class="input" type="number" ng-model="case.hours" ng-change="updateWorkingPlanSave(inputData)"></div></div></div><div class="add" style="opacity:0"><button class="wfo-button primary _icon"><i class="fa fa-plus"></i></button></div></div><!--  --><div id="conflictAlerts" class="conflict-alerts" ng-class="{'conflicts-exist': validateData(inputData)}"></div></div><!-- selections --><div class="plan-inputs-select-plan"><div class="text">load inputs from a previously saved plan</div><div class="button"><button class="wfo-button primary" ng-click="selectSavedPlan_open()">Select a Plan</button></div></div></div><!-- 
        end avialable inventoroy step
     --><!-- 
        ===========================
        start case constraints step
        ===========================
     --><div ng-if="step === 'CaseConstraints'"><div class="plan-inputs-header">Plan Inputs - Case Constraints</div><div class="plan-inputs"><div class="sub-header">Set Upper, lower, and fixed constraints on case volumes:</div><div class="constraints-container"><div class="constraints"><div ng-repeat="constraint in inputData.cc.constraints track by $index" class="constraint" id="{{$index}}"><div class="idx"><span class="conflict-notifier" ng-if="constraint.conflictsWith">*</span>{{$index + 1}}</div><div class="label">Total case volume for</div><div class="case-type"><select ng-model="constraint.case_type" ng-change="updateWorkingPlanSave(inputData)" ng-options="key as vartype.title for (key, vartype) in inputData.ai"></select></div><div class="middle-label">must</div><div class="comparator"><select ng-model="constraint.comparator" ng-change="updateWorkingPlanSave(inputData)" ng-options="key as vartype for (key, vartype) in comparatorsDisp"></select></div><div class="volume"><div class="input-container"><input type="number" class="input" ng-model="constraint.volume" ng-change="updateWorkingPlanSave(inputData)"></div></div><div class="delete"><button class="wfo-button primary _icon" ng-click="deleteConstraint($index)"><i class="fa fa-trash"></i></button></div></div></div><div class="add"><button class="wfo-button primary _icon" ng-click="addConstraint()"><i class="fa fa-plus"></i></button></div><!-- <div class="alerts"
                     ng-if="conflictObject.cc.constraints.conflict">
                    <div ng-repeat="conflict in conflictObject.cc.constraints">
                        {{conflict}}
                    </div>
                </div> --><div id="conflictAlerts" class="conflict-alerts" ng-class="{'conflicts-exist': validateData(inputData)}"></div><div class="msgs"></div></div></div><!-- selections --><div class="plan-inputs-select-plan"><div class="text">load inputs from a previously saved plan</div><div class="button"><button class="wfo-button primary" ng-click="selectSavedPlan_open()">Select a Plan</button></div></div><!--
            modals
        --><!-- add constraint --><div ng-if="addConstraintModalShown" class="modal modal-wrapper plan-inputs-modal create-worker" ng-click="addConstraint_close()"><div class="modal-container" ng-click="$event.stopPropagation()"><div class="modal-title">Add a Case Constraint</div><div class="text">Total case volume for</div><div class="input-row"><div class="label">Case Type</div><select ng-model="newConstraint.case_type" ng-options="key as vartype.title for (key, vartype) in inputData.ai"></select></div><div class="text">must</div><div class="input-row"><div class="label">Comparator</div><select ng-model="newConstraint.comparator" ng-options="key as vartype for (key, vartype) in comparatorsDisp"></select></div><div class="input-row"><div class="label">Volume</div><div class="input-container"><input type="number" class="input" ng-model="newConstraint.volume"></div></div><div class="submit"><button class="wfo-button _primary submit" ng-click="addConstraint_submit(newConstraint)">Submit</button></div><div class="close"><button class="wfo-button _icon close" ng-click="addConstraint_close()"><i class="fa fa-times"></i></button></div></div></div><!-- delete constraint --><div ng-if="deleteConstraintModalShown" class="modal modal-wrapper plan-inputs-modal create-worker" ng-click="deleteConstraint_close()"><div class="modal-container" ng-click="$event.stopPropagation()"><div class="modal-title">Delete this Constraint?</div><div style="margin: 10px">Total case volume for {{constraintToDelete.case_type}} must {{constraintToDelete.comparator}} {{constraintToDelete.volume}}</div><div class="submit"><button class="wfo-button _primary submit" ng-click="deleteConstraint_submit(constraintToDelete)">delete</button></div><div class="close"><button class="wfo-button _icon close" ng-click="deleteConstraint_close()"><i class="fa fa-times"></i></button></div></div></div></div><!-- 
        end case constraints step
     --><!-- 
        ===============================
        start resource flexibility step
        ===============================
     --><div ng-if="step === 'ResourceFlexibility'"><div class="plan-inputs-header">Plan Inputs - Resource Flexibility</div><!-- inputs --><div class="plan-inputs"><div class="sub-header">Set rules for who can work which cases:</div><div class="flexibility-container"><div class="rules"><div ng-repeat="rule in inputData.rf.flexibility track by $index" class="rule" id="{{$index}}"><div class="idx"><span class="conflict-notifier" ng-if="rule.conflictsWith">*</span>{{$index + 1}}</div><div class="comparator"><select ng-model="rule.comparator" ng-change="updateWorkingPlanSave(inputData)" ng-options="key as vartype for (key, vartype) in flexiblityComparatorsDisp"></select></div><div class="percent"><div class="input-container"><input type="number" class="input" ng-model="rule.percent" ng-change="updateWorkingPlanSave(inputData)"></div></div><div class="middle-label">% of</div><div class="case-type"><select ng-model="rule.worker" ng-change="updateWorkingPlanSave(inputData)" ng-options="key as vartype.title for (key, vartype) in inputData.fte"></select></div><div class="middle-label">total hours must be spent working</div><div class="case-type"><select ng-model="rule.case_type" ng-change="updateWorkingPlanSave(inputData)" ng-options="key as vartype.title for (key, vartype) in inputData.ai"></select></div><div class="delete"><button class="wfo-button primary _icon" ng-click="deleteRule($index)"><i class="fa fa-trash"></i></button></div></div></div><div class="add"><button class="wfo-button primary _icon" ng-click="addRule()"><i class="fa fa-plus"></i></button></div><!-- <div class="alerts"
                     ng-if="conflicts">
                    <div ng-repeat="conflict in conflictObject.rf.flexibility">
                        {{conflict.conflict}}
                    </div>
                </div> --><div id="conflictAlerts" class="conflict-alerts" ng-class="{'conflicts-exist': validateData(inputData)}"></div><div class="msgs"></div></div></div><!-- selections --><div class="plan-inputs-select-plan"><div class="text">load inputs from a previously saved plan</div><div class="button"><button class="wfo-button primary" ng-click="selectSavedPlan_open()">Select a Plan</button></div></div><!--
            modals
        --><!-- add rules --><div ng-if="addRuleModalShown" class="modal modal-wrapper plan-inputs-modal create-worker" ng-click="addRule_close()"><div class="modal-container" ng-click="$event.stopPropagation()"><div class="modal-title">Add a Rule</div><div class="input-row"><div class="label">Comparator</div><select ng-model="newRule.comparator" ng-options="key as vartype for (key, vartype) in flexiblityComparatorsDisp"></select></div><div class="input-row"><div class="label">Percent</div><div class="input-container"><input type="number" class="input" ng-model="newRule.percent"></div></div><div class="text">% of</div><div class="input-row"><div class="label">FTE</div><select ng-model="newRule.worker" ng-options="key as vartype.title for (key, vartype) in inputData.fte"></select></div><div class="text">total hours must be spent working</div><div class="input-row"><div class="label">Case Type</div><select ng-model="newRule.case_type" ng-options="key as vartype.title for (key, vartype) in inputData.ai"></select></div><div class="submit"><button class="wfo-button _primary submit" ng-click="addRule_submit(newRule)">Submit</button></div><div class="close"><button class="wfo-button _icon close" ng-click="addRule_close()"><i class="fa fa-times"></i></button></div></div></div><!-- delete constraint --><div ng-if="deleteRuleModalShown" class="modal modal-wrapper plan-inputs-modal create-worker" ng-click="deleteRule_close()"><div class="modal-container" ng-click="$event.stopPropagation()"><div class="modal-title">Delete this Rule?</div><div style="margin: 10px">{{ruleToDelete.comparator}} {{ruleToDelete.percent}}% of {{ruleToDelete.worker}} total hours must be spent working {{ruleToDelete.case_type}}</div><div class="submit"><button class="wfo-button _primary submit" ng-click="deleteRule_submit(ruleToDelete)">delete</button></div><div class="close"><button class="wfo-button _icon close" ng-click="deleteRule_close()"><i class="fa fa-times"></i></button></div></div></div></div><!-- 
        end resource flexibility step
     --><!-- 
         ===================
         start global modals
         ===================
      --><!-- select a saved plan --><div ng-if="selectSavedPlanModalShown" class="modal modal-wrapper" ng-click="selectSavedPlan_close()"><div class="modal-container" ng-click="$event.stopPropagation()"><div class="modal-title">Previously Saved Plans</div><div class="saved-plans"><div ng-repeat="plan in savedPlans track by $index" class="plan" ng-class="{'selected': selectedSavedPlan.title === plan.title}"><div class="title" ng-click="selectSavedPlan_selectPlan(plan)">{{plan.title}}</div><div class="created-by" ng-click="selectSavedPlan_selectPlan(plan)">{{plan.created_by}}</div><div class="delete"><button class="wfo-button primary _icon"><i class="fa fa-trash"></i></button></div></div></div><div class="saved-plan-buttons"><div class="preview-inputs"><button ng-class="{'disabled': !selectedSavedPlan.title}" ng-click="selectSavedPlan_previewPlan()" class="wfo-button primary">Preview Inputs</button></div><div class="upload-inputs"><button ng-click="selectSavedPlan_uploadPlan(selectedSavedPlan)" ng-class="{'disabled': !selectedSavedPlan.title}" class="wfo-button primary">Upload Inputs</button></div></div><div class="close"><button class="wfo-button _icon close" ng-click="selectSavedPlan_close()"><i class="fa fa-times"></i></button></div></div></div><!-- previewing data --><div ng-if="selectSavedPlanModalPreviewShown" class="modal modal-wrapper"><div class="modal-container"><div class="modal-title">{{selectedSavedPlan.title}}</div><div class="modal-table"><div class="title">FTE</div><div class="table"><table><tbody><tr class="header"><td></td><td ng-repeat="(key, worker) in selectedSavedPlan.fte">{{worker.title}}</td></tr><tr><td>FTE</td><td ng-repeat="(key, worker) in selectedSavedPlan.fte">{{worker.fte}}</td></tr><tr><td>Burn Rate</td><td ng-repeat="(key, worker) in selectedSavedPlan.fte">{{worker.burnRate}}</td></tr></tbody></table></div><div class="title">Available Inventory</div><div class="table"><table><tbody><tr class="header"><td></td><td ng-repeat="(key, case) in selectedSavedPlan.ai">{{case.title}}</td></tr><tr><td>Cases</td><td ng-repeat="(key, case) in selectedSavedPlan.ai">{{case.cases}}</td></tr><tr><td>Hours</td><td ng-repeat="(key, case) in selectedSavedPlan.ai">{{case.hours}}</td></tr></tbody></table></div><div class="title">Case Constraints</div><div class="table"><table><tbody><tr ng-repeat="contraint in selectedSavedPlan.cc.constraints"><td>Total case volume for {{contraint.case_type}} must {{contraint.comparator}} {{contraint.volume}}</td></tr></tbody></table></div><div class="title">Resource Flexibility</div><div class="table"><table><tbody><tr ng-repeat="rule in selectedSavedPlan.rf.flexibility"><td>{{rule.comparator}} {{rule.percent}}% of {{rule.worker}} total hours must be spent working {{rule.case_type}}</td></tr></tbody></table></div></div><div class="close"><button class="wfo-button _icon close" ng-click="selectSavedPlan_closePreview()"><i class="fa fa-times"></i></button></div></div></div><!-- 
        end global modals
     --><!-- 
        ==============================
        start navigation between steps 
        ==============================
     --><div class="page-navigation" ng-if="!selectSavedPlanModalShown && !addWorkerModalShown && !addConstraintModalShown && !addRuleModalShown"><div ng-repeat="(key, value) in steps" ng-if="key === step">{{value}}</div><div class="buttons"><button class="wfo-button primary _icon" ng-click="goToPrevStep(step)" ng-class="{'disabled': !validateStep_arrows(step, 'prev')}"><i class="fa fa-arrow-left"></i></button> <button class="wfo-button primary _icon" ng-click="goToNextStep(step)" ng-if="step !== 'ResourceFlexibility'"><i class="fa fa-arrow-right"></i></button> <button class="wfo-button primary" ng-click="runPlan(inputData)" ng-class="{'disabled': !validateData(inputData)}" ng-if="runnablePlan(step)">Run</button></div></div><!-- 
        end navigation between steps
     --></div>